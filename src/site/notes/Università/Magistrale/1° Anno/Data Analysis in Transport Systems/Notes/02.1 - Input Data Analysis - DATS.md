---
{"dg-publish":true,"permalink":"/universita/magistrale/1-anno/data-analysis-in-transport-systems/notes/02-1-input-data-analysis-dats/","tags":["UNI"]}
---

# [[Università/Magistrale/1° Anno/Data Analysis in Transport Systems/Notes/02.1 - Input Data Analysis - DATS\|02.1 - Input Data Analysis - DATS]]


In stochastic simulations, we must decide on input probability distributions from which to generate random variables:
- Random variables = observation or draws or realizations of a random variables from specified input distributions/processes
- Queueing systems: interarrival and service times

Once those input probability distributions are specified, must have a way to generate random variates from them


### Specifying Univariate Input Distributions

- Univariate distribution: a single (scalar) random input
	- May have many across simulation
- Typically have real-world observed data on a simulation input
	- Want to fit a probability distribution to the data
	- Then use this fitted distribution to generate random variates to drive the simulation
- Why not just drive simulation with actual observed data?
	- Seems more direct than fitting/generation
	- Useful for validation, but there are problems

### Choosing Probability Distributions

There are many probability distributions, continuous and discrete.

Some common **continuous** distributions:
- Normal
- Exponential
- Logistic
- Continuous uniform
- (Triangular) - not in the Assgm
- Weibull
- Gamma
- Pareto
- Lognormal
- Log-logistic
- Erlang k
- Gumbel
- etc.

Some common **discrete** distributions:
- Discrete uniform
- Binomial
- Poisson
- Geometric
- Negative
- Binomial

See slides for useful books/links.

- Take a look at the data
	- Are numbers real or integers
	- Look at the range (negative and positive, just positive,...) - we can discart distribution
- Make a histogram
	- Match it to a subset of possible distribution of real data

### Fitting distribution to data

The first step is always to observe the data. Some things to look at are:
- Continuous vs discrete
- Range (also support): finite or infinite on right and left end?

Then, steps to take are:
- Make a [[Università/Magistrale/1° Anno/Data Analysis in Transport Systems/Notes/LabSess 1 - 2024-10-03 - Introduction to RStudio - DATS#Histogram\|histogram]]
	- Match it to shapes of known probability density functions

With working sample:
- Select a possibile distribution
- Estimate parameters
- Test goodness of fit

With test sample
- Final validation of selected model

There are several distribution-fitting packages in R, provided in [[MINITAB\|MINITAB]].

Other resources in R Studio:
- fitidistrplus
- vdc
- moments packages

### Coefficient of variation

```ad-Definizione
title: 

The coefficient of variation of a given distribution is defined as:
$
C_{X} = \frac{\sigma_{X}}{\mu_{X}}
$
where:
- $\sigma_{X}:$ [[03. Variabili Aleatorie#Deviazione standard|Deviazione standard]] (Standard Deviation)
- $\mu_{X}:$ [[03. Variabili Aleatorie#Media|Media]] (mean)

It's a measure of how far the selected distribution for the sample data relies from the exponential distribution ($C_{X} = 1$.

```

In practice:
- If $C_{X}>1 \quad \Longrightarrow \quad$ log-exponential distribution
- If $C_{X} = 1 \quad \Longrightarrow \quad$ exponential distribution
- If $C_{X}<1 \quad \Longrightarrow \quad$ Gamma family distribution


### Descriptive statistics methods in R

- **Variate type:** continuous or discrete
	- a data sample is always discrete. If there are many many values, it's continuous
- **Numerical description:** 
	- moments
	- mean
	- variance - standard deviation
	- Kurtosis
- Rough description in R:
	- `summary(<dataframe>)`
- Use library moments in R and compute first fourth sample moments, including skewness and kurtosis
- Check correlation in sample (`acf()`, `pack()`)
- Remove **shift** for exponential, gamma, Weibull type data


### Auxiliary Graphic Tools

#### Probability Plot - P Plot

```ad-Definizione
title: Probability Plot

A **Probability Plot** is a graphical comparison of an estimate of the true distribution function of the available data $X_{1}, X_{2}, ..., X_{n}$ with the distribution function of the fitted distribution.

```

##### Probability-Probability Plot

```ad-Definizione
title: 

A **Probability-Probability Plot** (PP Plot) is a graph of the model probabiity $\hat{F}(X_{i})$ versus the sample probability
$
\tilde{F_{n}}(X_{i}) = q_{i} = \frac{i-0.5}{n} \quad i = 1,2,...,n
$

```

If $\hat{F}(x)$ and $\tilde{F}(x)$  are close together, then the P-P plot will also be approximately linear with an intercept 0 and a slope 1.

The linear correlation coefficient of the fit of the PP Plot is a measurement of the goodness of fit of the proposed distribution.

The PP plot graphs 2 [[Università/Triennale/2° anno/2° Semestre/Probabilità e statistica/Appunti/03. Variabili Aleatorie#Funzione di Ripartizione\|funzioni di ripartizione]] against each other: the theoretical on the x-axis, and the empirical on the y-axis.

#### Quantile-Quantile Plot - QQ Plot

```ad-Definizione
title: Quantile-Quantile Plot (QQ Plot)

A **Quantile-Quantile Plot** (QQ Plot) is a graph of the standard model quantiles $\hat{F^{-1}}(q_{i})$ where
$
q_{i} = \frac{i-0.5}{n} \quad i=1,2,...,n
$
versus $x_{(i)}, \, i=1,2,...,n$, so that $x_{(1)} < x_{(2)} < \cdots< x_{(n)}$ is the ordered sample data.

```

If $\hat{F}^{-1}(q_{i})$ and $x_{(n)}$ are close together than the QQ plot will also be approximately linear with an intercept meaning location and a slope meaning location. Also, it is a measurement of the goodness of fit of the proposed distribution.



